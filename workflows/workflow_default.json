{
  "fileName": "cargar_flujos_a_Github.json",
  "fileContent": "{\n  \"createdAt\": \"2025-07-18T16:50:00.038Z\",\n  \"updatedAt\": \"2025-07-20T18:41:07.672Z\",\n  \"id\": \"8jPJUWpWpv2jVQxu\",\n  \"name\": \"cargar flujos a Github\",\n  \"active\": false,\n  \"isArchived\": false,\n  \"nodes\": [\n    {\n      \"parameters\": {},\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -240,\n        -100\n      ],\n      \"id\": \"7a717e61-cece-442b-8905-ec82737fb90d\",\n      \"name\": \"When clicking ‘Execute workflow’\"\n    },\n    {\n      \"parameters\": {\n        \"url\": \"https://n8n.appintegria.com/api/v1/workflows\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-N8N-API-KEY\",\n              \"value\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJlYjEyMTI0Yi01NTNkLTRlMmMtYmM0Mi1kYzJlNGU4MDNlODIiLCJpc3MiOiJuOG4iLCJhdWQiOiJwdWJsaWMtYXBpIiwiaWF0IjoxNzUyODY2NDkzLCJleHAiOjE3NTUzODE2MDB9.klxzx4ChGq6X7_m9_e7ZLqjllMD7HlZiXHD0VIHMtXM\"\n            }\n          ]\n        },\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"json\"\n            }\n          }\n        }\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        -40,\n        -100\n      ],\n      \"id\": \"cbb9a626-0fb2-4dc6-bf9b-49e9ad00b698\",\n      \"name\": \"HTTP Request\"\n    },\n    {\n      \"parameters\": {\n        \"fieldToSplitOut\": \"data\",\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"typeVersion\": 1,\n      \"position\": [\n        160,\n        -100\n      ],\n      \"id\": \"d51be2f5-fe34-478c-a7ec-1ef7896a372f\",\n      \"name\": \"Split Out\"\n    },\n    {\n      \"parameters\": {\n        \"authentication\": \"oAuth2\",\n        \"resource\": \"file\",\n        \"owner\": {\n          \"__rl\": true,\n          \"value\": \"brayancanonk\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"brayancanonk\",\n          \"cachedResultUrl\": \"https://github.com/brayancanonk\"\n        },\n        \"repository\": {\n          \"__rl\": true,\n          \"value\": \"inverlink_extractos\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"inverlink_extractos\",\n          \"cachedResultUrl\": \"https://github.com/brayancanonk/inverlink_extractos\"\n        },\n        \"filePath\": \"=workflows/{{ $json[\\\"fileName\\\"] }}\",\n        \"fileContent\": \"={{ $json[\\\"fileContent\\\"] }}\",\n        \"commitMessage\": \"=update: {{ $json[\\\"fileName\\\"] }}\"\n      },\n      \"type\": \"n8n-nodes-base.github\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        1500,\n        -240\n      ],\n      \"id\": \"a9a72cd0-2b0a-4cad-bb29-b688a6abf893\",\n      \"name\": \"Create a file\",\n      \"webhookId\": \"c7eb2ac8-b1ee-4b0a-a3ff-e8f032469ea9\",\n      \"credentials\": {\n        \"githubOAuth2Api\": {\n          \"id\": \"xEGUBUapzVmXy8SB\",\n          \"name\": \"GitHub brayan\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"jsCode\": \"const nombreOriginal = $json[\\\"name\\\"] || \\\"workflow_default\\\";\\n\\n// Función para normalizar el nombre\\nfunction limpiarNombre(nombre) {\\n  return nombre\\n    .normalize(\\\"NFD\\\")                           // Quita tildes\\n    .replace(/[\\\\u0300-\\\\u036f]/g, \\\"\\\")           // Elimina los diacríticos\\n    .replace(/[^a-zA-Z0-9 ]/g, \\\"_\\\")            // Reemplaza caracteres no válidos con _\\n    .replace(/\\\\s+/g, \\\"_\\\")                      // Reemplaza espacios por _\\n    .replace(/_+/g, \\\"_\\\")                       // Evita múltiples guiones bajos\\n    .replace(/^_+|_+$/g, \\\"\\\");                  // Quita _ al inicio y al final\\n}\\n\\nconst nombreLimpio = limpiarNombre(nombreOriginal);\\n\\n// Asegura extensión\\nconst nombreFinal = `${nombreLimpio}.json`;\\n\\n// Salida para siguientes nodos\\nreturn [\\n  {\\n    json: {\\n      fileName: nombreFinal,\\n      fileContent: $json,\\n    },\\n  },\\n];\\n\"\n      },\n      \"type\": \"n8n-nodes-base.code\",\n      \"typeVersion\": 2,\n      \"position\": [\n        1060,\n        -60\n      ],\n      \"id\": \"82b73cef-e146-4fc5-a8d5-b68cd4be31ca\",\n      \"name\": \"Code\"\n    },\n    {\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"typeVersion\": 3,\n      \"position\": [\n        820,\n        -80\n      ],\n      \"id\": \"35fcf8f3-9269-4cbc-8101-c9d7cbac0781\",\n      \"name\": \"Loop Over Items\"\n    },\n    {\n      \"parameters\": {\n        \"conditions\": {\n          \"options\": {\n            \"caseSensitive\": true,\n            \"leftValue\": \"\",\n            \"typeValidation\": \"strict\",\n            \"version\": 2\n          },\n          \"conditions\": [\n            {\n              \"id\": \"b83578b4-205a-41ed-a0d3-cd6d46912b23\",\n              \"leftValue\": \"={{ $json.isArchived }}\",\n              \"rightValue\": \"\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              }\n            }\n          ],\n          \"combinator\": \"and\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.if\",\n      \"typeVersion\": 2.2,\n      \"position\": [\n        320,\n        -300\n      ],\n      \"id\": \"f29ae938-04fc-49e6-98eb-2642b80fa52f\",\n      \"name\": \"Separar flujos archivados\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fbaaf0a8-f50f-4de8-acb3-2a92cad9c3b5\",\n              \"name\": \"fileName\",\n              \"value\": \"={{ $json.name.replace(/[^a-z0-9]/gi, '_') }}.json\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"536d99f7-1001-45f1-a546-8c0f978d424e\",\n              \"name\": \"fileContent\",\n              \"value\": \"={{ JSON.stringify($json, null, 2) }}\",\n              \"type\": \"string\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        600,\n        -80\n      ],\n      \"id\": \"73eb7954-d252-45f2-b94c-c5ed7b3b4c65\",\n      \"name\": \"separar nombre contenido\"\n    },\n    {\n      \"parameters\": {\n        \"authentication\": \"oAuth2\",\n        \"resource\": \"file\",\n        \"operation\": \"get\",\n        \"owner\": {\n          \"__rl\": true,\n          \"value\": \"brayancanonk\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"brayancanonk\",\n          \"cachedResultUrl\": \"https://github.com/brayancanonk\"\n        },\n        \"repository\": {\n          \"__rl\": true,\n          \"value\": \"inverlink_extractos\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"inverlink_extractos\",\n          \"cachedResultUrl\": \"https://github.com/brayancanonk/inverlink_extractos\"\n        },\n        \"filePath\": \"=workflows/{{ $json.fileContent.fileName }}\",\n        \"additionalParameters\": {\n          \"reference\": \"main\"\n        }\n      },\n      \"type\": \"n8n-nodes-base.github\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        1260,\n        0\n      ],\n      \"id\": \"870f97c5-a838-499d-aa6a-ff7d076c4bfd\",\n      \"name\": \"Listar archivos\",\n      \"webhookId\": \"a60c624f-9248-4f71-ab81-d5fe07041b4b\",\n      \"credentials\": {\n        \"githubOAuth2Api\": {\n          \"id\": \"xEGUBUapzVmXy8SB\",\n          \"name\": \"GitHub brayan\"\n        }\n      },\n      \"onError\": \"continueErrorOutput\"\n    },\n    {\n      \"parameters\": {\n        \"conditions\": {\n          \"options\": {\n            \"caseSensitive\": true,\n            \"leftValue\": \"\",\n            \"typeValidation\": \"strict\",\n            \"version\": 2\n          },\n          \"conditions\": [\n            {\n              \"id\": \"71393ac8-44b1-4d63-9fa9-eca4a9e94eb2\",\n              \"leftValue\": \"\",\n              \"rightValue\": \"\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\",\n                \"name\": \"filter.operator.equals\"\n              }\n            }\n          ],\n          \"combinator\": \"and\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.if\",\n      \"typeVersion\": 2.2,\n      \"position\": [\n        1060,\n        -280\n      ],\n      \"id\": \"93a8d90e-e63a-478d-bfb1-c295f22ada1f\",\n      \"name\": \"If\"\n    },\n    {\n      \"parameters\": {\n        \"fieldToSplitOut\": \"data\",\n        \"options\": {}\n      },\n      \"id\": \"4c015398-05cd-41ca-ba78-dc9ad66484b8\",\n      \"name\": \"2. Split Into Items\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"typeVersion\": 1,\n      \"position\": [\n        240,\n        -720\n      ]\n    },\n    {\n      \"parameters\": {\n        \"conditions\": {\n          \"options\": {\n            \"caseSensitive\": true,\n            \"leftValue\": \"\",\n            \"typeValidation\": \"strict\",\n            \"version\": 2\n          },\n          \"conditions\": [\n            {\n              \"id\": \"e67e387e-d09f-4422-b5e1-88f61fa088b9\",\n              \"leftValue\": \"={{ $json.active }}\",\n              \"rightValue\": true,\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\"\n              }\n            }\n          ],\n          \"combinator\": \"and\"\n        },\n        \"options\": {}\n      },\n      \"id\": \"2f60c0f0-d02a-41a4-8fb8-d35c8bfceb47\",\n      \"name\": \"3. Is Workflow Active?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"typeVersion\": 2.2,\n      \"position\": [\n        440,\n        -720\n      ]\n    },\n    {\n      \"parameters\": {\n        \"jsCode\": \"const nombreOriginal = $json[\\\"name\\\"] || \\\"workflow_default\\\";\\n\\n// Función para normalizar el nombre\\nfunction limpiarNombre(nombre) {\\n  return nombre\\n    .normalize(\\\"NFD\\\")                           // Quita tildes\\n    .replace(/[\\\\u0300-\\\\u036f]/g, \\\"\\\")           // Elimina los diacríticos\\n    .replace(/[^a-zA-Z0-9 ]/g, \\\"_\\\")            // Reemplaza caracteres no válidos con _\\n    .replace(/\\\\s+/g, \\\"_\\\")                      // Reemplaza espacios por _\\n    .replace(/_+/g, \\\"_\\\")                       // Evita múltiples guiones bajos\\n    .replace(/^_+|_+$/g, \\\"\\\");                  // Quita _ al inicio y al final\\n}\\n\\nconst nombreLimpio = limpiarNombre(nombreOriginal);\\n\\n// Asegura extensión\\nconst nombreFinal = `${nombreLimpio}.json`;\\n\\n// Salida para siguientes nodos\\nreturn [\\n  {\\n    json: {\\n      fileName: nombreFinal,\\n      fileContent: $json,\\n    },\\n  },\\n];\\n\"\n      },\n      \"id\": \"462c4dd3-d3b1-4d72-8552-3a4d167e6870\",\n      \"name\": \"4. Prepare Filename and Content\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"typeVersion\": 2,\n      \"position\": [\n        700,\n        -680\n      ]\n    },\n    {\n      \"parameters\": {\n        \"authentication\": \"oAuth2\",\n        \"resource\": \"file\",\n        \"operation\": \"get\",\n        \"owner\": {\n          \"__rl\": true,\n          \"value\": \"brayancanonk\",\n          \"mode\": \"name\"\n        },\n        \"repository\": {\n          \"__rl\": true,\n          \"value\": \"inverlink_extractos\",\n          \"mode\": \"name\"\n        },\n        \"filePath\": \"=workflows/{{ $json.fileName }}\",\n        \"additionalParameters\": {}\n      },\n      \"id\": \"149ac46f-2c3e-42db-b83a-476efbc99788\",\n      \"name\": \"5. Check if File Exists\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        900,\n        -720\n      ],\n      \"webhookId\": \"63e8cf57-9c5c-4c64-bd26-1a66e39b9f86\",\n      \"credentials\": {\n        \"githubOAuth2Api\": {\n          \"id\": \"xEGUBUapzVmXy8SB\",\n          \"name\": \"GitHub brayan\"\n        }\n      },\n      \"onError\": \"continueErrorOutput\"\n    },\n    {\n      \"parameters\": {\n        \"authentication\": \"oAuth2\",\n        \"resource\": \"file\",\n        \"operation\": \"edit\",\n        \"owner\": {\n          \"__rl\": true,\n          \"value\": \"brayancanonk\",\n          \"mode\": \"name\"\n        },\n        \"repository\": {\n          \"__rl\": true,\n          \"value\": \"inverlink_extractos\",\n          \"mode\": \"name\"\n        },\n        \"filePath\": \"=workflows/{{ $('4. Prepare Filename and Content').item.json.fileName }}\",\n        \"fileContent\": \"={{ JSON.stringify($json.fileContent, null, 2) }}\",\n        \"commitMessage\": \"actualización de flujo\"\n      },\n      \"id\": \"05d7e8cc-4ccb-4842-ba6f-e3b0fff74507\",\n      \"name\": \"6a. Update Existing File\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        1160,\n        -800\n      ],\n      \"webhookId\": \"3d06b855-ceac-4afd-b325-79b358d5d6f0\",\n      \"credentials\": {\n        \"githubOAuth2Api\": {\n          \"id\": \"xEGUBUapzVmXy8SB\",\n          \"name\": \"GitHub brayan\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"authentication\": \"oAuth2\",\n        \"resource\": \"file\",\n        \"owner\": \"brayancanonk\",\n        \"repository\": \"inverlink_extractos\",\n        \"filePath\": \"=workflows/{{ $json.fileName }}\",\n        \"fileContent\": \"={{ JSON.stringify($json.fileContent, null, 2) }}\",\n        \"commitMessage\": \"=feat: Create new workflow {{ $json.fileName }}\"\n      },\n      \"id\": \"7a4809cd-d4b6-410f-bbba-05d4c3801815\",\n      \"name\": \"6b. Create New File\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        1160,\n        -600\n      ],\n      \"webhookId\": \"2fed578b-8fcb-46c3-aa4c-a4ab8af55062\",\n      \"credentials\": {\n        \"githubOAuth2Api\": {\n          \"id\": \"xEGUBUapzVmXy8SB\",\n          \"name\": \"GitHub brayan\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"url\": \"https://n8n.appintegria.com/api/v1/workflows\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-N8N-API-KEY\",\n              \"value\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJlYjEyMTI0Yi01NTNkLTRlMmMtYmM0Mi1kYzJlNGU4MDNlODIiLCJpc3MiOiJuOG4iLCJhdWQiOiJwdWJsaWMtYXBpIiwiaWF0IjoxNzUyODY2NDkzLCJleHAiOjE3NTUzODE2MDB9.klxzx4ChGq6X7_m9_e7ZLqjllMD7HlZiXHD0VIHMtXM\"\n            }\n          ]\n        },\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"json\"\n            }\n          }\n        }\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        20,\n        -720\n      ],\n      \"id\": \"cd7b4817-436d-4618-b19c-3bf7dd298e6b\",\n      \"name\": \"HTTP Request1\"\n    }\n  ],\n  \"connections\": {\n    \"When clicking ‘Execute workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"separar nombre contenido\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Listar archivos\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Separar flujos archivados\": {\n      \"main\": [\n        [],\n        []\n      ]\n    },\n    \"separar nombre contenido\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Listar archivos\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"2. Split Into Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"3. Is Workflow Active?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"3. Is Workflow Active?\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"4. Prepare Filename and Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"4. Prepare Filename and Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"5. Check if File Exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"5. Check if File Exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"6a. Update Existing File\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"6b. Create New File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"2. Split Into Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"staticData\": null,\n  \"meta\": {\n    \"templateCredsSetupCompleted\": true\n  },\n  \"pinData\": {},\n  \"versionId\": \"6c68fa41-2ed4-4592-863a-6edf621a7e68\",\n  \"triggerCount\": 0,\n  \"tags\": []\n}"
}